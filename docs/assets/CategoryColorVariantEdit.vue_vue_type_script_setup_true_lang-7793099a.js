import{_ as C}from"./SnackBar.vue_vue_type_script_setup_true_lang-12957a92.js";import{a as m}from"./axios-5c1a43ed.js";import{d as w,k as u,o as x,b as k,w as l,p as a,N as y,aK as D,a6 as V,a7 as c,ai as S,q as n,aL as b,$ as p,H as f,K as h}from"./index-0d4070de.js";import{V as I}from"./VSpacer-e5b4c91c.js";import{V as N}from"./VDialog-bcfbdd42.js";const L=w({__name:"CategoryColorVariantEdit",setup(T,{expose:v}){const s=u(!1),t=u(),r=u(null),d=u();v({openDialog:(e,o)=>{s.value=e,t.value=o}});const _=async()=>{d.value=!0;try{const e=await m.delete(`/products/${sessionStorage.getItem("stoneID")}/delete-color/`,{data:{color_id:t.value.id},headers:{"Content-Type":"application/json"}});r.value.show("success",e.data),d.value=!1,setTimeout(()=>{window.location.reload()},1e3)}catch(e){r.value.show("error",e.response?e.response.data:e.message),d.value=!1}},g=async()=>{try{const e=new FormData;e.append("color_id",t.value.id),e.append("color",JSON.stringify({name:t.value.name,is_available:!0}));const o=await m.patch(`/products/${sessionStorage.getItem("stoneID")}/update-color/`,e);r.value.show("success",o.data),console.log(o)}catch(e){r.value.show("error",e.response.data)}};return(e,o)=>(x(),k(N,{modelValue:n(s),"onUpdate:modelValue":o[2]||(o[2]=i=>h(s)?s.value=i:null),class:"v-dialog-sm"},{default:l(()=>[a(y,{title:"Edit Stone Color"},{default:l(()=>[a(D,null,{default:l(()=>[a(V,null,{default:l(()=>[a(c,null,{default:l(()=>[a(S,{height:150,"aspect-ratio":"16/9",cover:"",src:n(t).image,style:{"border-radius":"5px"}},null,8,["src"])]),_:1}),a(c,{class:"d-flex align-center"},{default:l(()=>[a(b,{modelValue:n(t).name,"onUpdate:modelValue":o[0]||(o[0]=i=>n(t).name=i),label:"Stone Color Name"},null,8,["modelValue"])]),_:1})]),_:1}),a(V,null,{default:l(()=>[a(c,{class:"d-flex gap-x-2"},{default:l(()=>[a(p,{color:"error",variant:"outline",loading:n(d),onClick:_},{default:l(()=>[f(" Delete ")]),_:1},8,["loading"]),a(I),a(p,{variant:"outlined",onClick:o[1]||(o[1]=i=>s.value=!1)},{default:l(()=>[f(" Cancel ")]),_:1}),a(p,{onClick:g},{default:l(()=>[f(" Save ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(C,{ref_key:"snackbarRef",ref:r},null,512)]),_:1},8,["modelValue"]))}});export{L as _};
