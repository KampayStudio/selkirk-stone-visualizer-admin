import{_ as R}from"./SnackBar.vue_vue_type_script_setup_true_lang-12957a92.js";import{a as T}from"./axios-5c1a43ed.js";import{d as y,k as r,o as A,b as N,w as o,p as e,N as F,aK as S,a6 as p,a7 as f,q as d,K as V,aL as U,$ as g,H as v}from"./index-0d4070de.js";import{V as $}from"./VFileInput-d0feb3ff.js";import{V as L}from"./VSpacer-e5b4c91c.js";import{V as E}from"./VDialog-bcfbdd42.js";const J=y({__name:"CategoryColorVariantAdd",setup(K,{expose:_}){const t=r(!1),m=r({name:""}),s=r(null),c=r(null),u=r();_({openAddDialog:()=>{t.value=!t.value}});const w=async()=>{u.value=!0;try{const a=`/products/${sessionStorage.getItem("stoneID")}/add-color/`;if(!s.value[0]||!(s.value[0]instanceof File))throw console.log(s),new Error("No valid image file selected");const C=await(D=>new Promise((I,b)=>{const i=new FileReader;i.readAsDataURL(D),i.onload=()=>I(i.result),i.onerror=B=>b(B)}))(s.value[0]),x={color:{name:m.value.name,image:C,is_available:!0}},k=await T.patch(a,x);c.value.show("success",k.data),u.value=!1,setTimeout(()=>{window.location.reload()},1e3)}catch(l){c.value.show("error",l.message||l.response&&l.response.data),console.log(l.message||l.response&&l.response.data),u.value=!1}};return(l,a)=>(A(),N(E,{modelValue:d(t),"onUpdate:modelValue":a[3]||(a[3]=n=>V(t)?t.value=n:null),class:"v-dialog-sm"},{default:o(()=>[e(F,{title:"Edit Stone Color"},{default:o(()=>[e(S,null,{default:o(()=>[e(p,null,{default:o(()=>[e(f,null,{default:o(()=>[e($,{modelValue:d(s),"onUpdate:modelValue":a[0]||(a[0]=n=>V(s)?s.value=n:null),label:"Variant Image"},null,8,["modelValue"])]),_:1}),e(f,{class:"d-flex align-center"},{default:o(()=>[e(U,{modelValue:d(m).name,"onUpdate:modelValue":a[1]||(a[1]=n=>d(m).name=n),label:"Stone Color Name"},null,8,["modelValue"])]),_:1})]),_:1}),e(p,null,{default:o(()=>[e(f,{class:"d-flex gap-x-2"},{default:o(()=>[e(L),e(g,{variant:"outlined",onClick:a[2]||(a[2]=n=>t.value=!1)},{default:o(()=>[v(" Cancel ")]),_:1}),e(g,{loading:d(u),onClick:w},{default:o(()=>[v(" Add ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1}),e(R,{ref_key:"snackbarRef",ref:c},null,512)]),_:1},8,["modelValue"]))}});export{J as _};
