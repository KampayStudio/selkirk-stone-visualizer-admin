import{_ as D}from"./SnackBar.vue_vue_type_script_setup_true_lang-12957a92.js";import{a as R}from"./axios-5c1a43ed.js";import{d as U,k as i,o as g,b as _,w as o,p as a,N as B,aK as F,a6 as p,a7 as s,q as t,aL as I,c as A,F as P,a as T,m as f,ai as L,H as k,x as E,$ as N,K as $}from"./index-0d4070de.js";import{V as K}from"./VForm-1f016451.js";import{V as b}from"./VFileInput-d0feb3ff.js";import{V as O,a as w}from"./VRadioGroup-016848ca.js";import{V as h}from"./VDialog-bcfbdd42.js";const q=f("hr",{class:"my-2"},null,-1),z=f("p",{class:"text-body-1 my-2"}," Add Colors ",-1),G={class:"d-flex align-center gap-x-2"},aa=U({__name:"CategoryAddDialog",setup(H,{expose:x}){const d=i(!1),m=i(!1),V=i(),n=i({productImage:null,productName:null,isInStock:null,colors:[]}),r=i({variantName:null,variantImage:null});x({openDialog:()=>{d.value=!d.value}});const v=u=>new Promise((e,l)=>{if(!u){e(null);return}const c=new FileReader;c.onload=()=>e(c.result),c.onerror=S=>l(S),c.readAsDataURL(u)}),C=async()=>{n.value.colors.push({name:r.value.variantName,image:await v(r.value.variantImage[0])}),r.value.variantImage=null,r.value.variantName=null},y=async()=>{m.value=!0;const u={image:await v(n.value.productImage[0]),name:n.value.productName,status:!0,isInStock:n.value.isInStock,colors:n.value.colors};console.log(u);try{const e="/products/",l=await R.post(e,u);console.log("Product added:",l.data),V.value.show("success",l.data),m.value=!1,setTimeout(()=>{window.location.reload()},1e3)}catch(e){console.error("Error adding product:",e),V.value.show("error",`Error adding product: ${e.response.data}`),m.value=!1}};return(u,e)=>(g(),_(h,{modelValue:t(d),"onUpdate:modelValue":e[5]||(e[5]=l=>$(d)?d.value=l:null),class:"v-dialog-sm"},{default:o(()=>[a(B,{title:"Add Stone Product"},{default:o(()=>[a(F,null,{default:o(()=>[a(K,null,{default:o(()=>[a(p,null,{default:o(()=>[a(s,{cols:"12",md:"6"},{default:o(()=>[a(b,{modelValue:t(n).productImage,"onUpdate:modelValue":e[0]||(e[0]=l=>t(n).productImage=l),accept:"image/*",label:"Product Image",multiple:!1},null,8,["modelValue"])]),_:1}),a(s,{cols:"12",md:"6"},{default:o(()=>[a(I,{modelValue:t(n).productName,"onUpdate:modelValue":e[1]||(e[1]=l=>t(n).productName=l),label:"Product Name"},null,8,["modelValue"])]),_:1}),a(s,{cols:"12"},{default:o(()=>[a(O,{modelValue:t(n).isInStock,"onUpdate:modelValue":e[2]||(e[2]=l=>t(n).isInStock=l),inline:""},{default:o(()=>[a(w,{label:"In Stock",value:!0}),a(w,{label:"Out of Stock",value:!1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),q,z,a(p,null,{default:o(()=>[(g(!0),A(P,null,T(t(n).colors,l=>(g(),_(s,{key:l,cols:"12",md:"6"},{default:o(()=>[f("div",G,[f("div",null,[a(L,{width:50,height:30,"aspect-ratio":"16/9",cover:"",src:l.image,style:{"border-radius":"5px"}},null,8,["src"])]),k(" "+E(l.name),1)])]),_:2},1024))),128))]),_:1}),a(p,{class:"d-flex align-center"},{default:o(()=>[a(s,{cols:"12",md:"5"},{default:o(()=>[a(b,{modelValue:t(r).variantImage,"onUpdate:modelValue":e[3]||(e[3]=l=>t(r).variantImage=l),accept:"image/*",label:"Variant Image"},null,8,["modelValue"])]),_:1}),a(s,{cols:"12",md:"5"},{default:o(()=>[a(I,{modelValue:t(r).variantName,"onUpdate:modelValue":e[4]||(e[4]=l=>t(r).variantName=l),label:"Variant Name"},null,8,["modelValue"])]),_:1}),a(N,{variant:"outlined",icon:"mdi-plus",size:"small",onClick:C})]),_:1}),a(p,null,{default:o(()=>[a(s,null,{default:o(()=>[a(N,{block:"",loading:t(m),variant:"outlined",onClick:y},{default:o(()=>[k(" Add Stone ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(D,{ref_key:"snackbarRef",ref:V},null,512)]),_:1},8,["modelValue"]))}});export{aa as _};
